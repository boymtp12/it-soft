var URLHTTP=window.location.href.split("/");URLHTTP=URLHTTP[0]+"//"+URLHTTP[2]+"/";const URL_API=URLHTTP+"api/v1/public/";console.log(URL_API),$(function(){addMenuDropDown(),showCourseTuVan(),checkAdvisory(),$("#btn-advisory").click(function(){postAdvisoryInfor()})});function showCourseTuVan(){let a=window.location.href.split("/");console.log(a[4]);let b=a[4],c=``;ajaxCallGet("course/find-by-name-image-subcontent-createdate/0").then(a=>{console.log(a),a.data.map(a=>{console.log(a),c+=a.id==b?`<option value="${a.id}" selected>${a.name}</option>`:`<option value="${a.id}">${a.name}</option>`}),$("#courseAdvisory >select").html(c)})}function postAdvisoryInfor(){if(""==$("#emailAdvisory >input").val()||""==$("#phoneAdvisory >input").val()||""==$("#nameStudentAdvisory >input").val()||""==$("#dateOfBirth >input").val())alertWarning("Vui l\xF2ng nh\u1EADp \u0111\u1EA7y \u0111\u1EE7 th\xF4ng tin");else{let a=null===$("#codeGt>input").val()?"":$("#codeGt>input").val();let b={phoneNumber:$("#phoneAdvisory>input").val(),fullName:$("#nameStudentAdvisory>input").val(),email:$("#emailAdvisory>input").val(),address:" ",dateOfBirth:$("#dateOfBirth>input").val(),addrOfBirth:" ",jobCurrent:" ",nameSchool:" ",facultySchool:" ",codeGt:a,codePrivate:"",takeCertification:!0,deleted:!0,statusCall:!0,sex:!1,userIdNum:8,groupStudentIdNum:1};console.log(b),ajaxCallPost("students/save/1/"+$("#courseAdvisory >select > option:selected").val()+"/"+1+"/"+8,b).then(a=>{console.log(a),null!=a.data&&alertSuccess("Ch\xFAc m\u1EEBng b\u1EA1n \u0111\xE3 \u0111\u0103ng k\xFD th\xE0nh c\xF4ng.")}).catch(()=>{alertDanger("\u0110\u0103ng k\xFD th\u1EA5t b\u1EA1i.")})}}function checkNullAdvisory(){""==$("#emailAdvisory >input").val()||""==$("#phoneAdvisory >input").val()||""==$("#nameStudentAdvisory >input").val()||""==$("#dateOfBirth >input").val()?$("#btn-advisory").prop("disabled",!0):$("#btn-advisory").prop("disabled",!1)}function checkAdvisory(){$("#emailAdvisory >input").change(function(){""==$("#emailAdvisory >input").val()?$("#emailAdvisory >span").css({display:"inline","font-size":"12px",color:"white"}):$("#emailAdvisory >input").val().toLowerCase().match("^[a-z][a-z0-9_\\.]{5,32}@[a-z0-9]{2,}(\\.[a-z0-9]{2,4}){1,2}$")?($("#emailAdvisory >span").css({display:"none"}),checkNullAdvisory()):($("#emailAdvisory >span").css({display:"inline","font-size":"12px",color:"white"}),alertWarning("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBa ch\u1EC9 email."))}),$("#phoneAdvisory >input").change(function(){""==$("#phoneAdvisory >input").val()?$("#phoneAdvisory >span").css({display:"inline","font-size":"12px",color:"white"}):$("#phoneAdvisory >input").val().match("^\\+?(?:0|84)(?:\\d){9}$")?($("#phoneAdvisory >span").css({display:"none"}),checkNullAdvisory()):($("#phoneAdvisory >span").css({display:"inline","font-size":"12px",color:"white"}),alertWarning("Vui l\xF2ng nh\u1EADp \u0111\xFAng s\u0111t c\u1EE7a b\u1EA1n."))}),$("#nameStudentAdvisory >input").change(function(){""==$("#nameStudentAdvisory >input").val()?$("#nameStudentAdvisory >span").css({display:"inline","font-size":"12px",color:"white"}):($("#nameStudentAdvisory >span").css({display:"none"}),checkNullAdvisory())}),$("#dateOfBirth >input").change(function(){""==$("#dateOfBirth >input").val()?$("#dateOfBirth >span").css({display:"inline","font-size":"12px",color:"white"}):($("#dateOfBirth >span").css({display:"none"}),checkNullAdvisory())})}function addMenuDropDown(){let a=``;ajaxCallGet("course/find-by-name-image-subcontent-createdate/0").then(b=>{b.data.map(b=>{a+=`<li><a class="dropdown-item" href="${URLHTTP+b.urlView+"?"+b.urlView+"="+b.id}">${b.name}</a></li>`}),$("#menuKhoaHoc").html(a),$("#menuKhoaHoc").append("<li><a class=\"dropdown-item\" href=\"xemthem\">Xem t\u1EA5t c\u1EA3</a></li>")})}function checkLogin(){let a=getItemLocalStorage("user");if(null!=a){let b=`
        <a href="#" class="d-block" id="text-name-user" style="text-transform: capitalize">${a.data.name}</a>
        `;$("#idBlockSidebar").html(b)}else window.location.href="login"}function logOut(){localStorage.removeItem("user"),window.location.href="login"}function formatNumber(a,b,c){a+="",x=a.split(b),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var d=/(\d+)(\d{3})/;d.test(x1);)x1=x1.replace(d,"$1"+c+"$2");return x1+x2}function alertSuccess(a,b=2e3){$.notify({icon:"far fa-check-circle",message:a},{delay:b,offset:{x:15,y:15},type:"success",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031e9})}function alertInfo(a,b=2e3){$.notify({icon:"fas fa-info-circle",message:a},{delay:b,offset:{x:15,y:15},type:"info",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031e9})}function alertWarning(a,b=2e3){$.notify({icon:"fas fa-exclamation",message:a},{delay:b,offset:{x:15,y:15},type:"warning",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031e9})}function alertDanger(a,b=2e3){$.notify({icon:"fas fa-exclamation-triangle",message:a},{timer:1e3,delay:b,offset:{x:15,y:15},type:"danger",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031e9})}async function ajaxCallGet(a){let b=null;return await $.ajax({type:"GET",dataType:"json",url:URL_API+a,timeout:3e4,success:function(a){b=a},error:function(a,b,c){console.log(c)}}),b}async function ajaxCallGetHasAsyn(a){let b=null;return await $.ajax({type:"GET",dataType:"json",url:URL_API+a,async:!1,timeout:3e4,success:function(a){b=a},error:function(a,b,c){console.log(c)}}),b}async function callUploadFile(a){let b;return await $.ajax({type:"POST",url:"api/v1/public/upload-file",data:a,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(a){b=a.data},error:function(a){console.log(a)}}),b}async function ajaxCallPost(a,b){let c=null;return await $.ajax({type:"POST",data:JSON.stringify(b),url:URL_API+a,timeout:3e4,contentType:"application/json",success:function(a){c=a},error:function(a,b,c){console.log(c)}}),c}function setItemLocalStorage(a,b){localStorage.setItem(a,JSON.stringify(b))}function getItemLocalStorage(a){return JSON.parse(localStorage.getItem(a))}